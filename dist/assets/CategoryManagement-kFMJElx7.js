import{r as x,j as e,a as N,b as v}from"./index-D-IP5-lX.js";import{D as w,t as u,N as C,o as I,a6 as j,G as f,M as k,p as E}from"./index-DayB5pOv.js";import{A as F}from"./AdminLayout-DomCUjgJ.js";const D=({category:l,isOpen:c,onClose:g,onSave:p})=>{const[r,o]=x.useState({name:"",description:"",icon:"ðŸŽ†",heroImage:""}),[a,m]=x.useState({});x.useEffect(()=>{c&&(o(l?{name:l.name||"",description:l.description||"",icon:l.icon||"ðŸŽ†",heroImage:l.heroImage||""}:{name:"",description:"",icon:"ðŸŽ†",heroImage:""}),m({}))},[l,c]);const d=()=>{const s={};return r.name.trim()||(s.name="Category name is required"),r.description.trim()||(s.description="Description is required"),r.icon.trim()||(s.icon="Icon is required (e.g., an emoji)"),r.heroImage.trim()?/^https?:\/\/.+/.test(r.heroImage)||(s.heroImage="Please enter a valid URL"):s.heroImage="Hero image URL is required",m(s),Object.keys(s).length===0},h=s=>{if(s.preventDefault(),d()){const t={name:r.name,description:r.description,icon:r.icon,heroImage:r.heroImage};p(t)}},i=(s,t)=>{o(n=>({...n,[s]:t})),a[s]&&m(n=>{const y={...n};return delete y[s],y})},b=["ðŸŽ†","ðŸŽ‡","âœ¨","ðŸŽŠ","ðŸŽ‰","ðŸ’¥","ðŸ”¥","â­","ðŸŒŸ","ðŸ’«","ðŸŽ","ðŸŽˆ","ðŸŒ¸","ðŸŒ€","ðŸš€","ðŸ‘¶"];return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100","aria-label":"Close modal",children:e.jsx(w,{size:20})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>i("name",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter category name"}),a.name&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(u,{className:"mr-1"})," ",a.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:r.description,onChange:s=>i("description",s.target.value),rows:4,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${a.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter category description"}),a.description&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(u,{className:"mr-1"})," ",a.description]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Icon *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl p-2 border rounded bg-gray-50",children:r.icon||"?"}),e.jsx("input",{type:"text",value:r.icon,onChange:s=>i("icon",s.target.value),maxLength:5,className:`flex-1 px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${a.icon?"border-red-500":"border-gray-300"}`,placeholder:"Enter emoji or icon text"})]}),a.icon&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(u,{className:"mr-1"})," ",a.icon]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick select:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(s=>e.jsx("button",{type:"button",onClick:()=>i("icon",s),className:`text-2xl p-2 rounded-lg border-2 hover:bg-gray-50 transition-colors ${r.icon===s?"border-red-500 bg-red-50":"border-gray-200"}`,"aria-label":`Select icon ${s}`,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Image URL *"}),e.jsx("input",{type:"url",value:r.heroImage,onChange:s=>i("heroImage",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${a.heroImage?"border-red-500":"border-gray-300"}`,placeholder:"https://example.com/image.jpg"}),a.heroImage&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(u,{className:"mr-1"})," ",a.heroImage]}),r.heroImage&&!a.heroImage&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsx("div",{className:"relative w-full h-32 border border-gray-200 rounded-lg overflow-hidden bg-gray-50 flex items-center justify-center",children:e.jsx("img",{src:r.heroImage,alt:"Preview",className:"max-w-full max-h-full object-contain",onError:s=>{s.target.style.display="none"}})})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200 sticky bottom-0 bg-white py-4 px-6 z-10",children:[e.jsx("button",{type:"button",onClick:g,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(C,{}),e.jsx("span",{children:l?"Update Category":"Create Category"})]})]})]})]})}):null},$=()=>{const{categories:l,addCategory:c,updateCategory:g,deleteCategory:p}=N(),{getProductsByCategory:r}=v(),[o,a]=x.useState(null),[m,d]=x.useState(!1),h=()=>{a(null),d(!0)},i=t=>{a(t),d(!0)},b=t=>{const n=r(t);if(n.length>0){if(!window.confirm(`This category has ${n.length} product(s). Deleting it will not delete the products, but they will need to be reassigned to other categories. Are you sure you want to continue?`))return}else if(!window.confirm("Are you sure you want to delete this category?"))return;p(t)},s=t=>{if(o)g(o.id,t);else{const n={id:`CAT${Date.now()}`,...t};c(n)}d(!1)};return e.jsx(F,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your product categories and organization"})]}),e.jsxs("button",{onClick:h,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors mt-4 md:mt-0",children:[e.jsx(I,{}),e.jsx("span",{children:"Add Category"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(j,{className:"text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Categories"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(f,{className:"text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.reduce((t,n)=>t+r(n.id).length,0)}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Products"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(j,{className:"text-purple-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.round(l.reduce((t,n)=>t+r(n.id).length,0)/l.length)||0}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Avg Products/Category"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(t=>{const n=r(t.id).length;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:t.heroImage,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-full p-2 text-2xl",children:t.icon}),e.jsxs("div",{className:"absolute top-4 right-4 bg-red-600 text-white px-2 py-1 rounded text-xs font-semibold",children:[n," products"]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:t.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Category ID:"}),e.jsx("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:t.id})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Products:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[n," items"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>window.open(`/products/${t.id}`,"_blank"),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 transition-colors",title:"View Category Page",children:[e.jsx(f,{}),e.jsx("span",{className:"text-sm",children:"View"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>i(t),className:"flex items-center space-x-1 text-green-600 hover:text-green-800 transition-colors",title:"Edit Category",children:[e.jsx(k,{}),e.jsx("span",{className:"text-sm",children:"Edit"})]}),e.jsxs("button",{onClick:()=>b(t.id),className:"flex items-center space-x-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete Category",children:[e.jsx(E,{}),e.jsx("span",{className:"text-sm",children:"Delete"})]})]})]})]})]},t.id)})}),l.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(j,{className:"text-5xl mx-auto"})}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No categories found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first product category."}),e.jsx("button",{onClick:h,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Create First Category"})]}),e.jsx(D,{category:o,isOpen:m,onClose:()=>d(!1),onSave:s})]})})};export{$ as default};
