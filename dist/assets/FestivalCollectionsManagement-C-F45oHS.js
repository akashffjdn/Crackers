import{r as c,b as ke,a as Ce,h as b,j as e,c as B}from"./index-D-IP5-lX.js";import{o as le,V as Pe,w as Ae,x as Se,G as Ie,E as De,ad as Fe,ae as Ee,M as Oe,p as $e,D as K,N as de}from"./index-DayB5pOv.js";import{A as qe}from"./AdminLayout-DomCUjgJ.js";import{f as q}from"./formatPrice-llLTZHwJ.js";const ze=()=>{const[u,T]=c.useState([]),[S,I]=c.useState(!0),[L,D]=c.useState(null),{products:w,isLoading:k,error:_}=ke(),{categories:ce,isLoading:G,error:U}=Ce(),[F,ie]=c.useState(""),[ne,E]=c.useState(!1),[oe,W]=c.useState(!1),[M,Q]=c.useState(null),[C,xe]=c.useState(""),[v,X]=c.useState(null),[O,y]=c.useState(!1),[z,o]=c.useState(null),[P,V]=c.useState(null),Z={title:"",description:"",slug:"",color:"from-red-500 to-orange-600",image:"",isActive:!0,sortOrder:1,tags:[],customPacks:[],showAllTaggedProducts:!0,seoTitle:"",seoDescription:""},[i,x]=c.useState(Z),ee={name:"",description:"",price:0,mrp:0,image:"",products:[],isActive:!0},[d,f]=c.useState(ee),[g,A]=c.useState([]),j=c.useCallback(async()=>{I(!0),D(null);try{const a=(await b.get("/collections/admin/all")).data.map(r=>{const{assignedProducts:l,...n}=r;return{...n,id:r._id,customPacks:(r.customPacks||[]).map((p,h)=>({...p,id:p._id||`temp-pack-${r._id}-${h}`,_id:p._id}))}});T(a)}catch(t){console.error("Error fetching collections:",t),D(t.response?.data?.message||t.message||"Failed to fetch collections")}finally{I(!1)}},[]);c.useEffect(()=>{j()},[j]);const te=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),me=()=>{Q(null),x({...Z,sortOrder:u.length>0?Math.max(...u.map(t=>t.sortOrder))+1:1}),o(null),E(!0)},ue=t=>{Q(t);const{id:s,createdAt:a,updatedAt:r,customPacks:l,...n}=t;x({...n,tags:[...t.tags||[]]}),o(null),E(!0)},ge=async t=>{const s=u.find(a=>a.id===t);if(s&&window.confirm(`Delete "${s.title}"?`))try{I(!0),await b.delete(`/collections/${t}`),T(a=>a.filter(r=>r.id!==t)),alert("Deleted.")}catch(a){D(`Delete failed: ${a.response?.data?.message||a.message}`)}finally{I(!1)}},pe=async t=>{const s=u.find(r=>r.id===t);if(!s)return;const a=!s.isActive;T(r=>r.map(l=>l.id===t?{...l,isActive:a,updatedAt:new Date().toISOString()}:l));try{await b.put(`/collections/${t}`,{isActive:a})}catch(r){D(`Toggle failed: ${r.response?.data?.message||r.message}`),T(l=>l.map(n=>n.id===t?{...n,isActive:s.isActive,updatedAt:s.updatedAt}:n))}},he=async t=>{if(t.preventDefault(),o(null),y(!0),!i.title||!i.description){o("Title and Description required."),y(!1);return}const s=i.slug||te(i.title),a={...i,slug:s};try{M?await b.put(`/collections/${M.id}`,a):await b.post("/collections",a),E(!1),Q(null),j()}catch(r){o(r.response?.data?.message||r.message||"Save failed.")}finally{y(!1)}},se=async(t,s)=>{const a=[...u].sort((m,R)=>m.sortOrder-R.sortOrder),r=a.findIndex(m=>m.id===t);if(r===-1)return;const l=a[r],n=s==="up"?r-1:r+1;if(n<0||n>=a.length)return;const p=a[n],h=b.put(`/collections/${l.id}`,{sortOrder:p.sortOrder}),N=b.put(`/collections/${p.id}`,{sortOrder:l.sortOrder});I(!0);try{await Promise.all([h,N]),j()}catch{D("Sort order update failed."),j()}},be=t=>{xe(t.id),$(),o(null),V(null),W(!0)},$=()=>{X(null),f(ee),A([]),o(null)},ye=t=>{X(t);const{id:s,_id:a,createdAt:r,...l}=t;f({...l}),A(Array.isArray(t.products)?[...t.products]:[]),o(null)},fe=async()=>{if(o(null),!d.name||!d.description||g.length===0||d.price===void 0||d.mrp===void 0){o("Pack Name, Description, Price, MRP required, and at least one product selected.");return}if(d.price>d.mrp){o("Price cannot exceed MRP.");return}y(!0);const t=u.find(r=>r.id===C);if(!t){o("Collection not found."),y(!1);return}const s={_id:v?._id,name:d.name,description:d.description,price:d.price,mrp:d.mrp,image:d.image||"",products:g.map(r=>({productId:r.productId,quantity:r.quantity})),isActive:d.isActive!==void 0?d.isActive:!0};let a;if(v)a=(t.customPacks||[]).map(r=>{const{id:l,_id:n,createdAt:p,...h}=r,N={...h,_id:n,products:(h.products||[]).map(m=>({productId:m.productId,quantity:m.quantity}))};return r.id===v.id?s:N});else{a=(t.customPacks||[]).map(n=>{const{id:p,_id:h,createdAt:N,...m}=n;return{...m,_id:h,products:(m.products||[]).map(R=>({productId:R.productId,quantity:R.quantity}))}});const{_id:r,...l}=s;a.push(l)}try{await b.put(`/collections/${C}/packs`,{customPacks:a}),$(),j()}catch(r){o(r.response?.data?.message||r.message||"Save failed.")}finally{y(!1)}},je=async t=>{const s=u.find(r=>r.id===C);if(!s||!s.customPacks)return;const a=s.customPacks.find(r=>r.id===t);if(a&&window.confirm(`Delete "${a.name}"?`)){y(!0),o(null);const r=s.customPacks.filter(l=>l.id!==t).map(l=>{const{id:n,_id:p,createdAt:h,...N}=l;return{...N,_id:p,products:(N.products||[]).map(m=>({productId:m.productId,quantity:m.quantity}))}});try{await b.put(`/collections/${C}/packs`,{customPacks:r}),v?.id===t&&$(),j()}catch(l){o(l.response?.data?.message||l.message||"Delete failed.")}finally{y(!1)}}},ve=t=>{const s=g.find(a=>a.productId===t);A(s?a=>a.map(r=>r.productId===t?{...r,quantity:r.quantity+1}:r):a=>[...a,{productId:t,quantity:1}])},ae=t=>{A(s=>s.filter(a=>a.productId!==t))},Ne=(t,s)=>{const a=Number(s);isNaN(a)||a<=0?ae(t):A(r=>r.map(l=>l.productId===t?{...l,quantity:a}:l))},Y=c.useCallback(t=>w.find(s=>s.id===t),[w]),H=c.useCallback(()=>g.reduce((t,s)=>{const a=Y(s.productId);return t+(a?a.price*s.quantity:0)},0),[g,Y]),re=c.useMemo(()=>k||!w?[]:P?w.filter(t=>typeof t.categoryId=="object"&&t.categoryId!==null&&"_id"in t.categoryId?t.categoryId._id===P:t.categoryId===P):w,[w,k,P]),J=c.useMemo(()=>u.filter(t=>t.title.toLowerCase().includes(F.toLowerCase())||t.description.toLowerCase().includes(F.toLowerCase())).sort((t,s)=>t.sortOrder-s.sortOrder),[u,F]),we=[{value:"from-red-500 to-orange-600",label:"Red to Orange"},{value:"from-yellow-500 to-orange-600",label:"Yellow to Orange"},{value:"from-green-500 to-blue-600",label:"Green to Blue"},{value:"from-blue-500 to-purple-600",label:"Blue to Purple"},{value:"from-purple-500 to-pink-600",label:"Purple to Pink"},{value:"from-pink-500 to-red-600",label:"Pink to Red"},{value:"from-indigo-500 to-purple-600",label:"Indigo to Purple"},{value:"from-gray-600 to-gray-800",label:"Gray Gradient"}];return e.jsx(qe,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Festival Collections"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage collections and create custom packs"})]}),e.jsxs("button",{onClick:me,className:"mt-4 md:mt-0 bg-red-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center space-x-2",children:[" ",e.jsx(le,{})," ",e.jsx("span",{children:"Add Collection"})," "]})]}),(S||k||G)&&e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm text-center",children:[" ",e.jsx(B,{text:S?"Loading collections...":k?"Loading products...":"Loading categories..."})," "]}),(L||_||U)&&!S&&!k&&!G&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg",children:[" Error: ",L||_||U," ",e.jsx("button",{onClick:j,className:"ml-4 px-2 py-1 border border-red-300 rounded text-sm hover:bg-red-100",children:"Retry"})," "]}),!S&&!L&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Pe,{className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search collections...",value:F,onChange:t=>ie(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),!S&&!L&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:J.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[" ",e.jsx(Ae,{className:"mx-auto text-4xl mb-3"})," No collections found",F?" matching search":"",". "]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custom Packs"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[" ",e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-r ${t.color} flex-shrink-0`}),e.jsxs("div",{className:"ml-4",children:[" ",e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title})," ",e.jsx("div",{className:"text-sm text-gray-500",children:t.description})," ",e.jsxs("div",{className:"text-xs text-gray-400",children:["/",t.slug]})," "]})]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[" ",e.jsxs("div",{className:"flex items-center space-x-2",children:[" ",e.jsxs("span",{className:"text-sm text-gray-900",children:[" ",(t.customPacks||[]).length," packs "]})," ",e.jsxs("button",{onClick:()=>be(t),className:"text-green-600 hover:text-green-800",children:[" ",e.jsx(Se,{})," "]})," "]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[" ",e.jsxs("button",{onClick:()=>pe(t.id),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[" ",t.isActive?e.jsx(Ie,{className:"mr-1"}):e.jsx(De,{className:"mr-1"})," ",t.isActive?"Active":"Inactive"," "]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[" ",e.jsxs("div",{className:"flex items-center space-x-2",children:[" ",e.jsx("span",{className:"text-sm text-gray-900",children:t.sortOrder})," ",e.jsxs("div",{className:"flex flex-col space-y-1",children:[" ",e.jsxs("button",{onClick:()=>se(t.id,"up"),disabled:s===0,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30",children:[" ",e.jsx(Fe,{className:"w-3 h-3"})," "]})," ",e.jsxs("button",{onClick:()=>se(t.id,"down"),disabled:s===J.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30",children:[" ",e.jsx(Ee,{className:"w-3 h-3"})," "]})," "]})," "]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[" ",e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[" ",e.jsxs("button",{onClick:()=>ue(t),className:"text-blue-600 hover:text-blue-900",children:[" ",e.jsx(Oe,{})," "]})," ",e.jsxs("button",{onClick:()=>ge(t.id),className:"text-red-600 hover:text-red-900",children:[" ",e.jsx($e,{})," "]})," "]})]})]},t.id))})]})})}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[" ",M?"Edit":"Add New"," Collection "]}),e.jsxs("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100",children:[" ",e.jsx(K,{size:20})," "]})]}),e.jsxs("form",{onSubmit:he,className:"p-6 space-y-6",children:[z&&e.jsx("div",{className:"p-3 bg-red-50 text-red-700 border border-red-200 rounded-lg text-sm",children:z}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"})," ",e.jsx("input",{type:"text",value:i.title,onChange:t=>{const s=t.target.value;x(a=>({...a,title:s,slug:te(s)}))},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"})," ",e.jsx("input",{type:"text",value:i.slug,onChange:t=>x(s=>({...s,slug:t.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"})," ",e.jsx("input",{type:"number",value:i.sortOrder,onChange:t=>x(s=>({...s,sortOrder:parseInt(t.target.value)||1})),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{className:"md:col-span-2",children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"})," ",e.jsx("textarea",{value:i.description,onChange:t=>x(s=>({...s,description:t.target.value})),required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"})," ",e.jsxs("select",{value:i.color,onChange:t=>x(s=>({...s,color:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[" ",we.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))," "]})," ",e.jsx("div",{className:`mt-2 h-8 rounded bg-gradient-to-r ${i.color}`})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"})," ",e.jsx("input",{type:"url",value:i.image||"",onChange:t=>x(s=>({...s,image:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{className:"md:col-span-2",children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (,)"})," ",e.jsx("input",{type:"text",value:i.tags?.join(", ")||"",onChange:t=>x(s=>({...s,tags:t.target.value.split(",").map(a=>a.trim()).filter(Boolean)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"SEO"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"})," ",e.jsx("input",{type:"text",value:i.seoTitle||"",onChange:t=>x(s=>({...s,seoTitle:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"})," ",e.jsx("textarea",{value:i.seoDescription||"",onChange:t=>x(s=>({...s,seoDescription:t.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]})]})]}),e.jsxs("div",{className:"border-t pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[" ",e.jsx("input",{type:"checkbox",checked:i.isActive,onChange:t=>x(s=>({...s,isActive:t.target.checked})),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"})," ",e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:" Active "})," "]}),e.jsxs("div",{className:"flex items-center",children:[" ",e.jsx("input",{type:"checkbox",checked:i.showAllTaggedProducts,onChange:t=>x(s=>({...s,showAllTaggedProducts:t.target.checked})),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"})," ",e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:" Show tagged products "})," "]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:" Cancel "}),e.jsxs("button",{type:"submit",disabled:O,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:[" ",O?e.jsx(B,{size:"sm"}):e.jsx(de,{})," ",e.jsx("span",{children:O?"Saving...":M?"Update":"Create"})," "]})]})]})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Manage Custom Packs"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:$,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[" ",e.jsx(le,{})," ",e.jsx("span",{children:"New Pack"})," "]}),e.jsxs("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100",children:[" ",e.jsx(K,{})," "]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[z&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 border border-red-200 rounded-lg text-sm",children:z}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4 border-b pb-2",children:"Existing Packs"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(u.find(t=>t.id===C)?.customPacks||[]).length===0?e.jsx("p",{className:"text-gray-500 text-sm md:col-span-full",children:"No packs created yet."}):(u.find(t=>t.id===C)?.customPacks||[]).map(t=>e.jsxs("div",{className:`border rounded-lg p-3 ${v?.id===t.id?"bg-blue-50 border-blue-300":"bg-gray-50"}`,children:[t.image&&e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-24 object-cover rounded mb-2 border"}),e.jsx("h5",{className:"font-medium text-sm mb-1 line-clamp-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[" ",e.jsx("span",{className:"text-red-600 font-semibold text-sm",children:q(t.price)})," ",t.mrp>t.price&&e.jsx("span",{className:"text-xs text-gray-500 line-through",children:q(t.mrp)})," "]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[(t.products||[]).length," products"]}),e.jsxs("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${t.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[" ",t.isActive?"Active":"Inactive"," "]}),e.jsxs("div",{className:"flex space-x-2 mt-3",children:[" ",e.jsx("button",{onClick:()=>ye(t),className:"flex-1 py-1.5 rounded text-xs bg-blue-100 text-blue-700 hover:bg-blue-200",children:" Edit "})," ",e.jsx("button",{onClick:()=>je(t.id),className:"flex-1 py-1.5 rounded text-xs bg-red-100 text-red-700 hover:bg-red-200",children:" Delete "})," "]})]},t.id))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:v?"Edit Pack Details":"Create New Pack"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"})," ",e.jsx("input",{type:"text",value:d.name,onChange:t=>f(s=>({...s,name:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desc *"})," ",e.jsx("textarea",{value:d.description,onChange:t=>f(s=>({...s,description:t.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[" ",e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"})," ",e.jsx("input",{type:"number",value:d.price||"",onChange:t=>f(s=>({...s,price:parseFloat(t.target.value)||0})),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]})," ",e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MRP *"})," ",e.jsx("input",{type:"number",value:d.mrp||"",onChange:t=>f(s=>({...s,mrp:parseFloat(t.target.value)||0})),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]})," "]}),e.jsxs("div",{children:[" ",e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"})," ",e.jsx("input",{type:"url",value:d.image||"",onChange:t=>f(s=>({...s,image:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})," "]}),e.jsxs("div",{className:"flex items-center",children:[" ",e.jsx("input",{type:"checkbox",checked:d.isActive,onChange:t=>f(s=>({...s,isActive:t.target.checked})),className:"h-4 w-4 text-red-600 border-gray-300 rounded"})," ",e.jsx("label",{className:"ml-2 block text-sm",children:" Active "})," "]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border text-sm",children:[" ",e.jsxs("p",{children:["Individual Total: ",e.jsx("strong",{children:q(H())})]})," ",e.jsxs("p",{children:["Pack Price: ",e.jsx("strong",{children:q(d.price||0)})]})," ",H()>(d.price||0)&&e.jsxs("p",{className:"text-green-600",children:["Saves: ",e.jsx("strong",{children:q(H()-(d.price||0))})]})," "]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-3 border-t",children:[" ",e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:" Clear/New "})," ",e.jsxs("button",{type:"button",onClick:fe,disabled:O,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:[" ",O?e.jsx(B,{size:"sm"}):e.jsx(de,{})," ",e.jsxs("span",{children:[v?"Update":"Create"," Pack"]})," "]})," "]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Add Products (",g.length," selected) "]}),e.jsxs("div",{className:"h-[500px] flex flex-col border rounded-lg",children:[e.jsxs("div",{className:"p-3 border-b bg-gray-50 flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>V(null),className:`px-3 py-1 rounded text-xs ${P?"bg-white hover:bg-gray-100 border":"bg-red-600 text-white"}`,children:" All "}),G?e.jsx("span",{children:"..."}):U?e.jsx("span",{className:"text-xs text-red-500",children:"!"}):ce.map(t=>e.jsxs("button",{type:"button",onClick:()=>V(t.id),className:`px-3 py-1 rounded text-xs ${P===t.id?"bg-red-600 text-white":"bg-white hover:bg-gray-100 border"}`,children:[" ",t.name," "]},t.id))]}),e.jsxs("div",{className:"p-3 border-b bg-gray-100 max-h-[150px] overflow-y-auto",children:[e.jsxs("h5",{className:"text-xs font-semibold mb-1 text-gray-600",children:["Selected (",g.length,")"]}),g.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"None"}):g.map(t=>{const s=Y(t.productId);return e.jsxs("div",{className:"flex items-center justify-between text-xs py-1",children:[" ",e.jsx("span",{className:"line-clamp-1 flex-1 pr-2",children:s?.name||"..."})," ",e.jsx("input",{type:"number",min:"1",value:t.quantity,onChange:a=>Ne(t.productId,parseInt(a.target.value)),className:"w-12 text-center border rounded px-1 py-0.5"})," ",e.jsx("button",{onClick:()=>ae(t.productId),className:"ml-2 text-red-500 hover:text-red-700",children:e.jsx(K,{size:10})})," "]},t.productId)})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:k?e.jsx(B,{}):_?e.jsx("p",{className:"text-red-500 text-xs",children:_}):re.length===0?e.jsx("p",{className:"text-center text-xs text-gray-500 py-4",children:"No products in this category."}):re.map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[" ",e.jsx("img",{src:t.images[0],alt:"",className:"w-8 h-8 object-cover rounded"})," ",e.jsx("span",{className:"text-xs font-medium line-clamp-1",children:t.name})," "]}),e.jsx("button",{onClick:()=>ve(t.id),className:"px-2 py-1 text-xs rounded bg-green-600 text-white hover:bg-green-700",disabled:g.some(s=>s.productId===t.id),children:"Add"})]},t.id))})]})]})]})]})]})]})})]})})};export{ze as default};
