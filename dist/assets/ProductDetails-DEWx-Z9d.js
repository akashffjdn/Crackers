import{e as W,d as B,f as E,a as O,b as D,r as l,g as H,j as e,c as w,L as n}from"./index-vjTx7X_X.js";import{i as M,m as z,j as q,F as Q,l as G,k as R,n as U,c as Z,d as _,o as J,g as K}from"./index-C8lrwkSk.js";import{H as m,F as h}from"./Footer-SUEj5nCx.js";import{c as V,f as k}from"./formatPrice-llLTZHwJ.js";const re=()=>{const{productId:r}=W(),{addToCart:C,error:g}=B(),{addToWishlist:F,isInWishlist:p}=E(),{getProductById:S,isLoading:d,error:X}=O(),{getCategoryById:I,isLoading:$,error:Y}=D(),[f,L]=l.useState(0),[o,b]=l.useState(1),[i,P]=l.useState("description"),u=H(),[c,j]=l.useState(!1),s=r?S(r):null,y=s?typeof s.categoryId=="object"?s.categoryId:I(s.categoryId):null;if(l.useEffect(()=>{!d&&r&&!s&&console.error(`Product with ID ${r} not found after loading.`)},[d,s,r,u]),d||$)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-orange-50/30 to-red-50/30 flex flex-col",children:[e.jsx(m,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[60vh]",children:e.jsx(w,{text:"Loading product details..."})}),e.jsx(h,{})]});if(!s)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-orange-50/30 to-red-50/30 flex flex-col",children:[e.jsx(m,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsxs("div",{className:"inline-block relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full blur-2xl opacity-50"}),e.jsx(M,{className:"relative text-7xl text-gray-300 mx-auto"})]}),e.jsx("h1",{className:"text-3xl font-bold font-display text-gray-900 mb-4",children:"Product not found"}),e.jsxs(n,{to:"/shop",className:"inline-flex items-center space-x-2 text-red-600 hover:text-red-700 font-semibold transition-colors group",children:[e.jsx(z,{className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{children:"Go back to shop"})]})]})}),e.jsx(h,{})]});const v=async()=>{if(!s)return!1;j(!0);const t=await C(s,o);return!t&&g==="Please log in to add items."?alert("Please log in to add items to your cart."):t||alert(`Failed to add item: ${g||"Unknown error"}`),j(!1),t},A=async()=>{await v()&&u("/checkout")},T=async()=>{p(s.id)?alert(`${s.name} is already in your wishlist!`):await F(s)&&alert(`${s.name} added to wishlist!`)},N=V(s.mrp,s.price),x=p(s.id);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-orange-50/30 to-red-50/30 flex flex-col",children:[e.jsx(m,{}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200",children:e.jsx("div",{className:"container-custom px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("nav",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[e.jsx(n,{to:"/",className:"hover:text-red-600 transition-colors",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(n,{to:"/shop",className:"hover:text-red-600 transition-colors",children:"Shop"}),e.jsx("span",{children:"/"}),e.jsx(n,{to:`/products/${y?.id||"all"}`,className:"hover:text-red-600 transition-colors",children:y?.name||"Category"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:s.name})]})})}),e.jsxs("div",{className:"container-custom px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 animate-fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square bg-white rounded-3xl overflow-hidden shadow-2xl border border-gray-100 group",children:[e.jsx("img",{src:s.images[f],alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}),s.isBestSeller&&e.jsxs("div",{className:"absolute top-4 left-4 bg-gradient-to-r from-red-600 to-orange-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-xl flex items-center space-x-2",children:[e.jsx(q,{}),e.jsx("span",{children:"Bestseller"})]})]}),e.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:s.images.map((t,a)=>e.jsx("button",{onClick:()=>L(a),className:`flex-shrink-0 w-24 h-24 rounded-2xl overflow-hidden border-2 transition-all ${f===a?"border-red-500 shadow-lg scale-105":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:t,alt:`Product view ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-display text-gray-900 mb-4",children:s.name}),e.jsxs("div",{className:"flex items-center flex-wrap gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(5)].map((t,a)=>e.jsx(Q,{className:`text-lg ${a<Math.floor(s.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},a)),e.jsxs("span",{className:"ml-2 text-gray-600 font-medium",children:["(",s.reviewCount," reviews)"]})]}),e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-bold ${s.soundLevel==="Low"?"bg-green-100 text-green-800":s.soundLevel==="Medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[s.soundLevel," Sound"]})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-4 mb-6",children:[e.jsx("span",{className:"text-4xl font-bold text-red-600",children:k(s.price)}),e.jsx("span",{className:"text-2xl text-gray-400 line-through",children:k(s.mrp)}),N>0&&e.jsxs("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg",children:[N,"% OFF"]})]}),e.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:s.shortDescription})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 border border-gray-100 shadow-xl space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"font-bold text-gray-700 text-lg",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border-2 border-gray-200 rounded-xl overflow-hidden",children:[e.jsx("button",{onClick:()=>b(Math.max(1,o-1)),className:"px-4 py-3 hover:bg-red-50 text-gray-600 hover:text-red-600 transition-colors font-bold",children:"-"}),e.jsx("span",{className:"px-6 py-3 border-x border-gray-200 min-w-[60px] text-center font-bold text-gray-900",children:o}),e.jsx("button",{onClick:()=>b(t=>Math.min(t+1,s.stock)),disabled:o>=s.stock,className:"px-4 py-3 hover:bg-red-50 text-gray-600 hover:text-red-600 transition-colors font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]}),e.jsxs("span",{className:`text-sm font-semibold ${s.stock>0?"text-gray-600":"text-red-600"}`,children:["(",s.stock>0?`${s.stock} in stock`:"Out of Stock",")"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-4 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:v,disabled:c||s.stock===0,className:"flex-1 bg-gradient-to-r from-red-600 to-orange-600 text-white py-4 px-6 rounded-xl font-bold text-lg hover:from-red-700 hover:to-orange-700 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:c?e.jsx(w,{size:"sm",color:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsx("span",{children:s.stock===0?"Out of Stock":"Add to Cart"})]})}),e.jsx("button",{onClick:A,disabled:c||s.stock===0,className:"flex-1 bg-gradient-to-r from-yellow-400 to-orange-400 text-red-700 py-4 px-6 rounded-xl font-bold text-lg hover:from-yellow-300 hover:to-orange-300 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s.stock===0?"Out of Stock":"Buy Now"})]}),e.jsxs("div",{className:"flex space-x-6 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:T,className:`flex items-center space-x-2 transition-all transform hover:scale-110 ${x?"text-red-600 hover:text-red-700":"text-gray-600 hover:text-red-600"}`,children:[e.jsx(R,{className:x?"fill-current":""}),e.jsx("span",{className:"font-semibold",children:x?"In Wishlist":"Add to Wishlist"})]}),e.jsxs("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-red-600 transition-all transform hover:scale-110",children:[e.jsx(U,{}),e.jsx("span",{className:"font-semibold",children:"Share"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-4 text-center border border-gray-100 shadow-lg hover:shadow-xl transition-all",children:[e.jsx(Z,{className:"text-3xl text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:"Safe & Certified"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-4 text-center border border-gray-100 shadow-lg hover:shadow-xl transition-all",children:[e.jsx(_,{className:"text-3xl text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:"Free Delivery"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-4 text-center border border-gray-100 shadow-lg hover:shadow-xl transition-all",children:[e.jsx(J,{className:"text-3xl text-red-600 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:"24/7 Support"})]})]})]})]}),e.jsx("div",{className:"mt-16 animate-fade-in",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:["description","features","specifications"].map(t=>e.jsx("button",{onClick:()=>P(t),className:`py-4 px-2 border-b-2 font-bold text-sm capitalize transition-colors ${i===t?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:t},t))})}),e.jsxs("div",{className:"p-8",children:[i==="description"&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:s.description})}),i==="features"&&(s.features?.length>0?e.jsx("ul",{className:"space-y-3",children:s.features.map((t,a)=>e.jsxs("li",{className:"flex items-start space-x-3 text-gray-700",children:[e.jsx(K,{className:"text-green-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-lg",children:t})]},a))}):e.jsx("p",{className:"text-gray-600",children:"No specific features listed."})),i==="specifications"&&(s.specifications&&Object.keys(s.specifications).length>0?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(s.specifications).map(([t,a])=>e.jsxs("div",{className:"flex justify-between items-start py-3 border-b border-gray-200",children:[e.jsx("span",{className:"font-bold text-gray-800 capitalize",children:t.replace(/([A-Z])/g," $1")}),e.jsx("span",{className:"text-gray-600 text-right font-medium",children:a})]},t))}):e.jsx("p",{className:"text-gray-600",children:"No specifications available."}))]})]})})]})]}),e.jsx(h,{})]})};export{re as default};
