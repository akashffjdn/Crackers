import{e as W,d as z,f as O,b as D,a as B,r as i,g as E,j as e,c as w,L as n}from"./index-D-IP5-lX.js";import{e as H,h as M,j as q,k as Q,F as G,a as R,l as U}from"./index-DayB5pOv.js";import{H as x,F as m}from"./Footer-BCAYlC8H.js";import{c as V,f as k}from"./formatPrice-llLTZHwJ.js";const X=()=>{const{productId:c}=W(),{addToCart:C,error:h}=z(),{addToWishlist:S,isInWishlist:u}=O(),{getProductById:F,isLoading:o}=D(),{getCategoryById:$,isLoading:I}=B(),[p,L]=i.useState(0),[r,f]=i.useState(1),[l,P]=i.useState("description"),j=E(),[d,b]=i.useState(!1),s=c?F(c):null,g=s?$(s.categoryId):null;if(i.useEffect(()=>{!o&&c&&!s&&console.error(`Product with ID ${c} not found.`)},[o,s,c,j]),o||I)return e.jsxs("div",{className:"min-h-screen bg-surface-900",children:[e.jsx(x,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] pt-16",children:e.jsx(w,{text:"Loading product..."})}),e.jsx(m,{})]});if(!s)return e.jsxs("div",{className:"min-h-screen bg-surface-900",children:[e.jsx(x,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] pt-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-white/[0.04] flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“¦"})}),e.jsx("h1",{className:"text-xl font-semibold text-white mb-2",children:"Product not found"}),e.jsx(n,{to:"/shop",className:"text-accent hover:text-accent-light transition-colors",children:"Go back to shop"})]})}),e.jsx(m,{})]});const N=async()=>{if(!s)return!1;b(!0);const t=await C(s,r);return!t&&h==="Please log in to add items."?alert("Please log in to add items to your cart."):t||alert(`Failed to add item: ${h||"Unknown error"}`),b(!1),t},A=async()=>{await N()&&j("/checkout")},T=async()=>{u(s.id)?alert(`${s.name} is already in your wishlist!`):await S(s)&&alert(`${s.name} added to wishlist!`)},v=V(s.mrp,s.price),y=u(s.id);return e.jsxs("div",{className:"min-h-screen bg-surface-900",children:[e.jsx(x,{}),e.jsxs("main",{className:"pt-20",children:[e.jsx("div",{className:"border-b border-white/[0.04]",children:e.jsx("div",{className:"section-container px-6 py-3",children:e.jsxs("nav",{className:"text-xs text-surface-500 flex items-center gap-2",children:[e.jsx(n,{to:"/",className:"hover:text-accent transition-colors",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(n,{to:"/shop",className:"hover:text-accent transition-colors",children:"Shop"}),e.jsx("span",{children:"/"}),e.jsx(n,{to:`/products/${g?.id||"all"}`,className:"hover:text-accent transition-colors",children:g?.name||"Category"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-surface-300",children:s.name})]})})}),e.jsxs("div",{className:"section-container px-6 py-10",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden card",children:e.jsx("img",{src:s.images[p],alt:s.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar",children:s.images.map((t,a)=>e.jsx("button",{onClick:()=>L(a),className:`flex-shrink-0 w-16 h-16 rounded-xl overflow-hidden border-2 transition-all duration-300 ${p===a?"border-accent":"border-white/[0.08] hover:border-white/[0.15]"}`,children:e.jsx("img",{src:t,alt:`View ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((t,a)=>e.jsx(H,{size:12,className:a<Math.floor(s.rating)?"text-gold":"text-surface-700"},a)),e.jsxs("span",{className:"text-xs text-surface-500 ml-1.5",children:["(",s.reviewCount,")"]})]}),e.jsxs("span",{className:`px-2.5 py-1 rounded-full text-2xs font-medium ${s.soundLevel==="Low"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":s.soundLevel==="Medium"?"bg-gold/10 text-gold border border-gold/20":"bg-accent/10 text-accent border border-accent/20"}`,children:[s.soundLevel," Sound"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:k(s.price)}),e.jsx("span",{className:"text-lg text-surface-500 line-through",children:k(s.mrp)}),v>0&&e.jsxs("span",{className:"badge-accent text-xs",children:[v,"% OFF"]})]}),e.jsx("p",{className:"body-md leading-relaxed",children:s.shortDescription})]}),e.jsxs("div",{className:"border-t border-b border-white/[0.06] py-6 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Qty"}),e.jsxs("div",{className:"flex items-center rounded-xl border border-white/[0.08] overflow-hidden",children:[e.jsx("button",{onClick:()=>f(Math.max(1,r-1)),className:"px-3 py-2 text-surface-400 hover:text-white hover:bg-white/[0.06] transition-all",children:"âˆ’"}),e.jsx("span",{className:"px-4 py-2 text-sm font-medium text-white border-x border-white/[0.08] min-w-[44px] text-center",children:r}),e.jsx("button",{onClick:()=>f(t=>Math.min(t+1,s.stock)),disabled:r>=s.stock,className:"px-3 py-2 text-surface-400 hover:text-white hover:bg-white/[0.06] transition-all disabled:opacity-30",children:"+"})]}),e.jsxs("span",{className:`text-xs ${s.stock>0?"text-surface-500":"text-accent font-semibold"}`,children:["(",s.stock>0?`${s.stock} in stock`:"Out of Stock",")"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:N,disabled:d||s.stock===0,className:"flex-1 btn-primary py-3.5 disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsx(w,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(M,{size:14})," ",s.stock===0?"Out of Stock":"Add to Cart"]})}),e.jsx("button",{onClick:A,disabled:d||s.stock===0,className:"flex-1 btn-secondary py-3.5 disabled:opacity-50 disabled:cursor-not-allowed",children:s.stock===0?"Out of Stock":"Buy Now"})]}),e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("button",{onClick:T,className:`flex items-center gap-2 text-sm transition-colors ${y?"text-accent":"text-surface-500 hover:text-accent"}`,children:[e.jsx(q,{size:14})," ",y?"In Wishlist":"Add to Wishlist"]}),e.jsxs("button",{className:"flex items-center gap-2 text-sm text-surface-500 hover:text-white transition-colors",children:[e.jsx(Q,{size:14})," Share"]})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 text-center",children:[{icon:G,label:"Safe & Certified",color:"text-emerald-500"},{icon:R,label:"Free Delivery",color:"text-blue-400"},{icon:U,label:"24/7 Support",color:"text-accent"}].map((t,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(t.icon,{className:`text-lg mx-auto ${t.color}`}),e.jsx("div",{className:"text-2xs text-surface-400 font-medium",children:t.label})]},a))})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("div",{className:"border-b border-white/[0.06]",children:e.jsx("nav",{className:"flex gap-8",children:["description","features","specifications"].map(t=>e.jsx("button",{onClick:()=>P(t),className:`py-3 text-sm font-medium capitalize transition-all duration-300 border-b-2 ${l===t?"border-accent text-accent":"border-transparent text-surface-500 hover:text-surface-300"}`,children:t},t))})}),e.jsxs("div",{className:"py-8",children:[l==="description"&&e.jsx("p",{className:"body-md leading-relaxed",children:s.description}),l==="features"&&(s.features?.length>0?e.jsx("ul",{className:"space-y-2",children:s.features.map((t,a)=>e.jsxs("li",{className:"flex items-start gap-3 text-sm text-surface-400",children:[e.jsx("span",{className:"text-accent mt-1",children:"â€¢"})," ",t]},a))}):e.jsx("p",{className:"body-sm",children:"No specific features listed."})),l==="specifications"&&(s.specifications&&Object.keys(s.specifications).length>0?e.jsx("div",{className:"grid md:grid-cols-2 gap-x-8 gap-y-0",children:Object.entries(s.specifications).map(([t,a])=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-white/[0.04]",children:[e.jsx("span",{className:"text-sm font-medium text-surface-300 capitalize",children:t.replace(/([A-Z])/g," $1")}),e.jsx("span",{className:"text-sm text-surface-500",children:a})]},t))}):e.jsx("p",{className:"body-sm",children:"No specifications available."}))]})]})]})]}),e.jsx(m,{})]})};export{X as default};
