import{a as V,r as x,j as e,b as G,c as H}from"./index-D-IP5-lX.js";import{D as Q,t as j,p as F,o as T,U as W,w as U,V as q,G as Z,M as J}from"./index-DayB5pOv.js";import{A as X}from"./AdminLayout-DomCUjgJ.js";import{c as Y,f as O}from"./formatPrice-llLTZHwJ.js";import{P as ee}from"./Pagination-CYRI1rSB.js";const se=({product:i,isOpen:D,onClose:M,onSave:B})=>{const{categories:m,isLoading:v}=V(),y={name:"",categoryId:"",description:"",shortDescription:"",mrp:0,price:0,soundLevel:"Low",burnTime:"",stock:0,images:[""],features:[""],specifications:{},tags:[""]},[r,g]=x.useState(y),[w,E]=x.useState(""),[N,k]=x.useState(""),[n,p]=x.useState({});x.useEffect(()=>{D&&(g(i?{name:i.name||"",categoryId:i.categoryId||"",description:i.description||"",shortDescription:i.shortDescription||"",mrp:i.mrp||0,price:i.price||0,soundLevel:i.soundLevel||"Low",burnTime:i.burnTime||"",stock:i.stock>=0?i.stock:0,images:i.images&&i.images.length>0?i.images:[""],features:i.features&&i.features.length>0?i.features:[""],specifications:i.specifications||{},tags:i.tags&&i.tags.length>0?i.tags:[""]}:y),p({}))},[i,D]);const S=()=>{const t={};r.name.trim()||(t.name="Product name is required"),r.categoryId||(t.categoryId="Category is required"),r.shortDescription.trim()||(t.shortDescription="Short description is required"),r.description.trim()||(t.description="Full description is required"),r.mrp<=0&&(t.mrp="MRP must be a positive number"),r.price<=0&&(t.price="Selling price must be a positive number"),r.price>r.mrp&&(t.price="Selling price cannot be higher than MRP"),r.stock<0&&(t.stock="Stock cannot be negative");const a=r.images.map(l=>l.trim()).filter(l=>l!=="");return a.length===0?t.images="At least one product image URL is required":a.some(l=>!/^https?:\/\/.+/.test(l))&&(t.images="Please enter valid URLs for images"),p(t),Object.keys(t).length===0},u=t=>{const{name:a,value:l}=t.target;let o=l;["mrp","price","stock"].includes(a)&&(o=l===""?0:parseFloat(l)||0,(o<0&&a==="stock"||o<0)&&(o=0)),g(h=>({...h,[a]:o})),n[a]&&p(h=>{const I={...h};return delete I[a],I})},f=(t,a,l)=>{g(o=>({...o,[l]:o[l].map((h,I)=>I===t?a:h)})),n[l]&&p(o=>{const h={...o};return delete h[l],h})},P=t=>{g(a=>({...a,[t]:[...a[t],""]}))},C=(t,a)=>{if((a==="images"||a==="features"||a==="tags")&&r[a].length<=1){g(l=>({...l,[a]:[""]}));return}g(l=>({...l,[a]:l[a].filter((o,h)=>h!==t)}))},$=()=>{w.trim()&&N.trim()&&(g(t=>({...t,specifications:{...t.specifications,[w.trim()]:N.trim()}})),E(""),k(""))},L=t=>{g(a=>{const l={...a.specifications};return delete l[t],{...a,specifications:l}})},R=t=>{if(t.preventDefault(),!S())return;const a={...r,images:r.images.map(l=>l.trim()).filter(l=>l!==""),features:r.features.map(l=>l.trim()).filter(l=>l!==""),tags:r.tags.map(l=>l.trim()).filter(l=>l!=="")};i&&(a.rating=i.rating,a.reviewCount=i.reviewCount),B(a)};return D?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:M,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Q,{className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter product name"}),n.name&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{name:"categoryId",value:r.categoryId,onChange:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.categoryId?"border-red-500":"border-gray-300"}`,disabled:v||m.length===0,children:[e.jsx("option",{value:"",children:v?"Loading...":"Select Category"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),n.categoryId&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.categoryId]}),m.length===0&&!v&&e.jsxs("p",{className:"text-yellow-600 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," No categories available."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description *"}),e.jsx("input",{type:"text",name:"shortDescription",value:r.shortDescription,onChange:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.shortDescription?"border-red-500":"border-gray-300"}`,placeholder:"Brief description for listing"}),n.shortDescription&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.shortDescription]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Description *"}),e.jsx("textarea",{name:"description",value:r.description,onChange:u,rows:4,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.description?"border-red-500":"border-gray-300"}`,placeholder:"Detailed product description"}),n.description&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.description]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRP *"}),e.jsx("input",{type:"number",name:"mrp",value:r.mrp,onChange:u,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.mrp?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),n.mrp&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.mrp]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Price *"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:u,min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),n.price&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.price]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity *"}),e.jsx("input",{type:"number",name:"stock",value:r.stock,onChange:u,min:"0",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.stock?"border-red-500":"border-gray-300"}`,placeholder:"0"}),n.stock&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.stock]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sound Level *"}),e.jsxs("select",{name:"soundLevel",value:r.soundLevel,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Mixed",children:"Mixed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Burn Time"}),e.jsx("input",{type:"text",name:"burnTime",value:r.burnTime,onChange:u,placeholder:"e.g., 60+ seconds",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Images *"}),r.images.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"url",value:t,onChange:l=>f(a,l.target.value,"images"),placeholder:"Enter image URL",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${n.images?"border-red-500":"border-gray-300"}`}),t&&e.jsx("div",{className:"w-12 h-12 border rounded overflow-hidden",children:e.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover",onError:l=>{l.target.style.display="none"}})}),r.images.length>1&&e.jsx("button",{type:"button",onClick:()=>C(a,"images"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(F,{})})]},a)),e.jsxs("button",{type:"button",onClick:()=>P("images"),className:"flex items-center space-x-2 text-red-600 hover:text-red-700",children:[e.jsx(T,{}),e.jsx("span",{children:"Add Image"})]}),n.images&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(j,{className:"mr-1"})," ",n.images]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Features"}),r.features.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:t,onChange:l=>f(a,l.target.value,"features"),placeholder:"Enter feature",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),r.features.length>1&&e.jsx("button",{type:"button",onClick:()=>C(a,"features"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(F,{})})]},a)),e.jsxs("button",{type:"button",onClick:()=>P("features"),className:"flex items-center space-x-2 text-red-600 hover:text-red-700",children:[e.jsx(T,{}),e.jsx("span",{children:"Add Feature"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specifications"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("input",{type:"text",value:w,onChange:t=>E(t.target.value),placeholder:"Specification name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),e.jsx("input",{type:"text",value:N,onChange:t=>k(t.target.value),placeholder:"Specification value",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),e.jsx("button",{type:"button",onClick:$,disabled:!w||!N,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Add"})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(r.specifications).map(([t,a])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t,":"]})," ",a]}),e.jsx("button",{type:"button",onClick:()=>L(t),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:e.jsx(F,{})})]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),r.tags.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:t,onChange:l=>f(a,l.target.value,"tags"),placeholder:"Enter tag",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),r.tags.length>1&&e.jsx("button",{type:"button",onClick:()=>C(a,"tags"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(F,{})})]},a)),e.jsxs("button",{type:"button",onClick:()=>P("tags"),className:"flex items-center space-x-2 text-red-600 hover:text-red-700",children:[e.jsx(T,{}),e.jsx("span",{children:"Add Tag"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 sticky bottom-0 bg-white py-4 px-6 z-10",children:[e.jsx("button",{type:"button",onClick:M,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v||m.length===0,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:i?"Update Product":"Create Product"})]})]})]})}):null},ne=()=>{const{products:i,addProduct:D,updateProduct:M,deleteProduct:B,isLoading:m,error:v}=G(),{categories:y,isLoading:r,error:g}=V(),[w,E]=x.useState([]),[N,k]=x.useState(null),[n,p]=x.useState(!1),[S,u]=x.useState(""),[f,P]=x.useState(""),[C,$]=x.useState("name"),[L,R]=x.useState(1),[t]=x.useState(10);x.useEffect(()=>{if(!m&&!r){let s=i;if(S){const c=S.toLowerCase();s=s.filter(d=>d.name.toLowerCase().includes(c)||d.tags&&d.tags.some(A=>A.toLowerCase().includes(c))||d.shortDescription.toLowerCase().includes(c))}f&&(s=s.filter(c=>typeof c.categoryId=="object"&&c.categoryId!==null&&"_id"in c.categoryId?c.categoryId._id===f:c.categoryId===f));const b=[...s].sort((c,d)=>{switch(C){case"name":return c.name.localeCompare(d.name);case"price":return c.price-d.price;case"price-desc":return d.price-c.price;case"stock":return c.stock-d.stock;case"rating":return d.rating-c.rating;default:return 0}});E(b),L!==1&&R(1)}else E([])},[i,S,f,C,m,r,L]);const a=Math.ceil(w.length/t),l=(L-1)*t,o=w.slice(l,l+t),h=()=>{k(null),p(!0)},I=s=>{k(s),p(!0)},_=async s=>{window.confirm("Are you sure you want to delete this product?")&&(await B(s)||alert("Failed to delete product."))},z=async s=>{let b=!1;N?b=await M(N.id,s):b=await D(s),b?(p(!1),k(null)):alert("Failed to save product.")},K=s=>s<=0?{label:"Out of Stock",color:"text-red-600 bg-red-50"}:s<10?{label:"Low Stock",color:"text-yellow-600 bg-yellow-50"}:{label:"In Stock",color:"text-green-600 bg-green-50"};return e.jsx(X,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your crackers inventory and listings"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(W,{}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:h,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:r||y.length===0,children:[e.jsx(T,{}),e.jsx("span",{children:"Add Product"})]})]})]}),(m||r)&&e.jsx("div",{className:"p-6 bg-white rounded-lg shadow-sm text-center",children:e.jsx(H,{text:"Loading data..."})}),v&&!m&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg",children:["Error loading products: ",v]}),g&&!r&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg",children:["Error loading categories: ",g]}),y.length===0&&!r&&!g&&e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-lg",children:"Warning: No categories found. Please add categories before adding products."}),!m&&!r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(U,{className:"text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Products"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(T,{className:"text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Categories"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(q,{className:"text-yellow-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(s=>s.stock>0&&s.stock<10).length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Low Stock"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(F,{className:"text-red-600 text-xl"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(s=>s.stock<=0).length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Out of Stock"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:S,onChange:s=>u(s.target.value),placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:f,onChange:s=>P(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",disabled:r,children:[e.jsx("option",{value:"",children:"All Categories"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsxs("select",{value:C,onChange:s=>$(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"price",children:"Price (Low-High)"}),e.jsx("option",{value:"price-desc",children:"Price (High-Low)"}),e.jsx("option",{value:"stock",children:"Stock (Low-High)"}),e.jsx("option",{value:"rating",children:"Rating (High-Low)"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{u(""),P(""),$("name")},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[(m||r)&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-6 text-center",children:e.jsx(H,{text:"Loading..."})})}),!m&&!r&&o.length>0&&o.map(s=>{const b=K(s.stock),c=Y(s.mrp,s.price);let d="Loading...";return r||(typeof s.categoryId=="object"&&s.categoryId!==null&&"name"in s.categoryId?d=s.categoryId.name:typeof s.categoryId=="string"?d=y.find(A=>A.id===s.categoryId)?.name||"Unknown ID":d="Invalid Category Data"),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.images[0],alt:s.name,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0",onError:A=>A.target.src="fallback-image.png"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2 max-w-xs",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{className:"font-semibold",children:O(s.price)}),c>0&&e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:[O(s.mrp)," (",c,"% off)"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.stock}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[s.rating," (",s.reviewCount,")"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b.color}`,children:b.label})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>window.open(`/product/${s.id}`,"_blank"),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Product Page",children:e.jsx(Z,{})}),e.jsx("button",{onClick:()=>I(s),className:"text-green-600 hover:text-green-900 p-1",title:"Edit Product",children:e.jsx(J,{})}),e.jsx("button",{onClick:()=>_(s.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Product",children:e.jsx(F,{})})]})})]},s.id)}),!m&&!r&&o.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"text-center py-16",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(U,{className:"text-5xl mx-auto"})}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting filters or add a new product."})]})})]})]})}),!m&&!r&&a>1&&e.jsx(ee,{currentPage:L,totalPages:a,onPageChange:R})]}),e.jsx(se,{product:N,isOpen:n,onClose:()=>{p(!1),k(null)},onSave:z})]})})};export{ne as default};
