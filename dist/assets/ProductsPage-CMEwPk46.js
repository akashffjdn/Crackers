import{r as i,d as H,j as e,L,e as M,a as E,b as $,c as R}from"./index-vjTx7X_X.js";import{B as C,H as v,F as N}from"./Footer-SUEj5nCx.js";import{j as O,k as W,l as F,F as _,i as I}from"./index-C8lrwkSk.js";import{c as T,f as A}from"./formatPrice-llLTZHwJ.js";const D=({product:s})=>{const[w,d]=i.useState(!1),[c,S]=i.useState(!1),{addToCart:h,error:f}=H(),[j,x]=i.useState(!1),o=async a=>{a.preventDefault(),a.stopPropagation(),x(!0);const l=await h(s);x(!1),!l&&f==="Please log in to add items."?alert("Please log in to add items to your cart."):l||alert(`Failed to add item: ${f||"Unknown error"}`)},n=a=>{a.preventDefault(),a.stopPropagation(),S(!c)},m=T(s.mrp,s.price);return e.jsx(L,{to:`/product/${s.id}`,className:"group block h-full",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:e.jsxs("div",{className:"card h-full flex flex-col relative group",children:[e.jsx("div",{className:"relative p-3",children:e.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-gray-100",children:[e.jsx("img",{src:s.images[0],alt:s.name,className:`w-full h-full object-cover transition-transform duration-700 ${w?"scale-110":"scale-100"}`}),e.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[s.isBestSeller&&e.jsxs("span",{className:"bg-gradient-to-r from-primary-600 to-secondary-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1 animate-pulse-slow",children:[e.jsx(O,{className:"text-xs"}),e.jsx("span",{children:"Bestseller"})]}),s.isOnSale&&e.jsxs("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:[m,"% OFF"]})]}),e.jsx("button",{onClick:n,className:`absolute top-3 right-3 p-2.5 rounded-full backdrop-blur-md border transition-all duration-300 transform hover:scale-110 ${c?"bg-primary-500 text-white border-primary-500 shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-primary-500 border-white/50"}`,children:e.jsx(W,{className:`text-sm ${c?"fill-current":""}`})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 translate-y-full opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 hidden lg:block",children:e.jsx(C,{variant:"primary",size:"sm",fullWidth:!0,onClick:o,disabled:s.stock===0,isLoading:j,leftIcon:e.jsx(F,{}),children:s.stock===0?"Sold Out":"Add to Cart"})})]})}),e.jsxs("div",{className:"p-4 pt-0 flex-1 flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full border ${s.soundLevel==="Low"?"bg-green-50 text-green-700 border-green-200":s.soundLevel==="Medium"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200"}`,children:[s.soundLevel," Sound"]})}),e.jsx("h3",{className:"font-display font-bold text-lg text-dark-900 mb-1 line-clamp-2 group-hover:text-primary-600 transition-colors",children:s.name}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:Array.from({length:5}).map((a,l)=>e.jsx(_,{className:`text-xs ${l<Math.floor(s.rating)?"text-secondary-400 fill-current":"text-gray-200"}`},l))}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",s.reviewCount,")"]})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[e.jsx("span",{className:"text-primary-600 font-bold text-xl",children:A(s.price)}),e.jsx("span",{className:"line-through text-gray-400 text-sm",children:A(s.mrp)})]}),e.jsx("div",{className:"lg:hidden",children:e.jsx(C,{variant:"primary",size:"sm",fullWidth:!0,onClick:o,disabled:s.stock===0,isLoading:j,leftIcon:e.jsx(F,{}),children:s.stock===0?"Sold Out":"Add"})})]})]})]})})},G=()=>{const{categoryId:s}=M(),{products:w,isLoading:d,error:c}=E(),{categories:S,isLoading:h,error:f,getCategoryById:j}=$(),[x,o]=i.useState("name"),[n,m]=i.useState({min:0,max:1e3}),[a,l]=i.useState(""),g=!h&&s?j(s):null,b=w,p=i.useMemo(()=>{if(d)return[];let y=(s?b.filter(r=>typeof r.categoryId=="object"&&r.categoryId!==null&&"_id"in r.categoryId?r.categoryId._id===s:r.categoryId===s):b).filter(r=>{const u=r.price>=n.min&&r.price<=n.max,B=!a||r.soundLevel===a;return u&&B});return y.sort((r,u)=>{switch(x){case"name":return r.name.localeCompare(u.name);case"price":return r.price-u.price;case"price-desc":return u.price-r.price;case"rating":return u.rating-r.rating;default:return 0}}),y},[b,s,x,n,a,d]);if(d||h)return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(v,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(R,{text:"Loading products..."})}),e.jsx(N,{})]});if(c||f)return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(v,{}),e.jsxs("div",{className:"flex-1 container mx-auto px-4 py-16 text-center text-red-600",children:["Error loading data: ",c||f]}),e.jsx(N,{})]});if(s&&!g&&!h)return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(v,{}),e.jsxs("div",{className:"flex-1 container mx-auto px-4 py-16 text-center",children:[e.jsx(I,{className:"text-6xl text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Category Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The category you requested does not exist."}),e.jsx(L,{to:"/shop",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Back to Shop"})," "]}),e.jsx(N,{})]});const k=s&&g&&p.length===0&&b.some(t=>typeof t.categoryId=="object"&&t.categoryId!==null&&"_id"in t.categoryId?t.categoryId._id===s:t.categoryId===s),P=!s&&p.length===0&&b.length>0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-orange-50/30 flex flex-col",children:[e.jsx(v,{}),e.jsxs("div",{className:"flex-1 container-custom px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[e.jsxs("div",{className:"inline-block relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-2xl opacity-30"}),e.jsx("div",{className:"relative text-7xl mb-4",children:g?.icon||"ðŸŽ‡"})]}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold font-display gradient-text mb-4",children:g?.name||"All Products"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-6 leading-relaxed",children:g?.description||"Browse all available fireworks."}),e.jsx("div",{className:"flex items-center justify-center space-x-4",children:e.jsxs("span",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-6 py-2 rounded-full font-bold text-sm shadow-lg",children:[p.length," Products Found"]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl p-6 sticky top-28 border border-gray-100 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold font-display text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>{o("name"),m({min:0,max:1e3}),l("")},className:"text-sm text-red-600 hover:text-red-700 font-semibold transition-colors",children:"Reset"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Sort By"}),e.jsxs("select",{value:x,onChange:t=>o(t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white transition-all font-medium",children:[e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"price",children:"Price: Low to High"}),e.jsx("option",{value:"price-desc",children:"Price: High to Low"}),e.jsx("option",{value:"rating",children:"Highest Rated"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Max Price: â‚¹",n.max]}),e.jsx("input",{type:"range",min:"0",max:"1000",step:"10",value:n.max,onChange:t=>m(y=>({...y,max:parseInt(t.target.value)})),className:"w-full h-3 bg-gradient-to-r from-red-200 to-orange-200 rounded-lg appearance-none cursor-pointer accent-red-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"â‚¹0"}),e.jsx("span",{children:"â‚¹1000"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Sound Level"}),e.jsxs("select",{value:a,onChange:t=>l(t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white transition-all font-medium",children:[e.jsx("option",{value:"",children:"All Levels"}),e.jsx("option",{value:"Low",children:"Low Sound"}),e.jsx("option",{value:"Medium",children:"Medium Sound"}),e.jsx("option",{value:"High",children:"High Sound"}),e.jsx("option",{value:"Mixed",children:"Mixed"})]})]}),e.jsx("button",{onClick:()=>{o("name"),m({min:0,max:1e3}),l("")},className:"w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all transform hover:scale-105",children:"Clear All Filters"})]})}),e.jsx("div",{className:"lg:w-3/4",children:p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in",children:p.map(t=>e.jsx(D,{product:t},t.id))}):e.jsxs("div",{className:"text-center py-20 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-gray-100 animate-scale-in",children:[e.jsxs("div",{className:"inline-block relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full blur-2xl opacity-50"}),e.jsx(I,{className:"relative text-7xl text-gray-300 mx-auto"})]}),e.jsx("h3",{className:"text-2xl font-bold font-display text-gray-900 mb-3",children:k?`No Products in ${g?.name}`:P?"No Products Available":"No Products Match Filters"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:k||P?"Check back later or browse other categories.":"Try adjusting your filters to find what you're looking for."}),k||P?e.jsx(L,{to:"/shop",className:"inline-block bg-gradient-to-r from-red-600 to-orange-600 text-white px-8 py-4 rounded-xl font-bold hover:from-red-700 hover:to-orange-700 transition-all transform hover:scale-105 shadow-lg",children:"Browse Other Categories"}):e.jsx("button",{onClick:()=>{o("name"),m({min:0,max:1e3}),l("")},className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-8 py-4 rounded-xl font-bold hover:from-red-700 hover:to-orange-700 transition-all transform hover:scale-105 shadow-lg",children:"Clear All Filters"})]})})]})]}),e.jsx(N,{})]})};export{G as default};
